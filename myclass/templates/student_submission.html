{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/student_submission.css' %}">

<div class="container">
  <div class="breadcrumb">
    <span class="breadcrumb-item">Nhà của tôi</span>
    <span class="breadcrumb-separator">/</span>
    <span class="breadcrumb-item">Các khóa học của tôi</span>
    <span class="breadcrumb-separator">/</span>
    <span class="breadcrumb-item active">Nộp bài tập về nhà Buổi {{lesson.lesson_id}}</span>
  </div>

  <h1 class="course-title">[Lv1.03] {{ course.course_name }}</h1>

  <div class="submission-container">
    <h2 class="submission-header">Nộp bài tập về nhà Buổi {{ lesson.lesson_id }}</h2>

    <div class="instructions">
      <p>Học viên hoàn thành và nộp bài tập về nhà. Tập tin được đặt theo <strong>&lt;Họ và tên học viên&gt;</strong> - <strong>&lt;Mã lớp&gt;</strong>-<strong>&lt;Buổi&gt;</strong>.</p>
      <p class="example">Ví dụ: NguyenThiTheoVi-Lv103-Bu{{ lesson.lesson_id|stringformat:"02d" }}.docx</p>
    </div>

    <div class="status-container">
      <div class="status-row">
        <span class="status-label">Trạng thái nộp bài</span>
        <span class="status-value">{{ submission_status }}</span>
      </div>
      <div class="status-row">
        <span class="status-label">Trạng thái chấm điểm</span>
        <span class="status-value">{{ grading_status }}</span>
      </div>
      <div class="status-row">
        <span class="status-label">Ngày hết hạn</span>
        <span class="status-value">{{ due_date }}</span>
      </div>
      <div class="status-row">
        <span class="status-label">Thời gian còn lại</span>
        <span class="status-value">{{ time_remaining }}</span>
      </div>
      <div class="status-row">
        <span class="status-label">Sửa lần cuối</span>
        <span class="status-value">{{ last_edit }}</span>
      </div>
      <div class="status-row">
        <span class="status-label">Gửi bình luận</span>
        <span class="status-value">Bình luận (0)</span>
      </div>
    </div>

    <form method="post" enctype="multipart/form-data" class="file-upload-container">
      {% csrf_token %}
      <input type="file" id="file-upload" class="file-input" name="submission_file">
      <label for="file-upload" class="file-label">Choose file</label>
      <span class="file-name">No file chosen</span>
      <button type="submit" class="submit-button">Add submission</button>
    </form>
  </div>
</div>

<script>
  document.getElementById('file-upload').addEventListener('change', function(e) {
    const fileName = e.target.files[0] ? e.target.files[0].name : 'No file chosen';
    document.querySelector('.file-name').textContent = fileName;
  });
</script>
{% endblock %}